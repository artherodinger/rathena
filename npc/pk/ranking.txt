prontera,148,203,3	script	ตามล่าผู้เล่นอื่น#2	10295,{
	menu "ล่าฆาตกร",L_MostWantedHunt,"ล่าคนเวลสูงสุด",L_HighestLevelHunt;
	
	L_MostWantedHunt:
	query_sql("SELECT `char_id`,`value` FROM `char_reg_num` WHERE `key` = 'killCount' ORDER BY `value` DESC LIMIT 3",.@charId,.@killCount);
	if(getarraysize(.@charId) <= 0)
	mes "ไม่พบข้อมูล";
	else{
		mes "ฆาตกรที่โหดที่สุด";
		for(.@i = 0; .@i < getarraysize(.@charId); .@i++){
			query_sql("SELECT `name` FROM `char` WHERE `char_id` = '" + .@charId[.@i] + "'",.@name$);
			mes callfunc("GetRankColor",(.@i + 1)) + (.@i + 1) + ".) " + .@name$ + " (" + callfunc("F_InsertComma",.@killCount[.@i]) + " Kill)^000000";
			.@menu$ += .@name$ + ":";
		}
		.@t = select(.@menu$);
		query_sql("SELECT `name` FROM `char` WHERE `char_id` = '" + .@charId[.@t - 1] + "'",.@name$);
		atcommand "@goto " + .@name$;
		getmapxy(.@map$,.@x,.@y);
		getfreecell(strcharinfo(3),.@rand_x,.@rand_y,.@x,.@y,5,5);
		warp strcharinfo(3),.@rand_x,.@rand_y;
		close2;
		end;
	}
	close;
	
	L_HighestLevelHunt:
	query_sql("SELECT `name`,`base_level` FROM `char` ORDER BY `base_level` DESC LIMIT 3",.@name$,.@blvl);
	if(getarraysize(.@name$) <= 0)
	mes "ไม่พบข้อมูล";
	else{
		mes "ผู้เล่นที่ Level มากที่สุด";
		for(.@i = 0; .@i < getarraysize(.@name$); .@i++){
			mes callfunc("GetRankColor",(.@i + 1)) + (.@i + 1) + ".) " + .@name$[.@i] + " (Level " + .@blvl[.@i] + ")^000000";
			.@menu$ += .@name$[.@i] + ":";
		}
		.@t = select(.@menu$);
		atcommand "@goto " + .@name$[.@t - 1];
		getmapxy(.@map$,.@x,.@y);
		getfreecell(strcharinfo(3),.@rand_x,.@rand_y,.@x,.@y,5,5);
		warp strcharinfo(3),.@rand_x,.@rand_y;
		close2;
		end;
	}
	close;

OnInit:
	waitingroom "ตามล่าผู้เล่นอื่น",0;
	end;
}
