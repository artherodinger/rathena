/*prontera,124,238,1	script	Random Enchantment	868,{
	mes "^3F28FFโอกาสติด:^000000 100%";
	mes "^3F28FFEnchant ได้เฉพาะ:^000000 อุปกรณ์สวมใส่ที่มี Slot ไม่ครบ 4 Slot";
	mes "^3F28FFZeny ที่ต้องใช้:^000000 " + callfunc("F_InsertComma",.price) + "z";
	next;
	
	setarray .@indices[1], EQI_HEAD_TOP, EQI_HEAD_MID, EQI_HEAD_LOW, EQI_ARMOR, EQI_HAND_L, EQI_HAND_R, EQI_GARMENT, EQI_SHOES, EQI_ACC_L, EQI_ACC_R, EQI_COSTUME_HEAD_TOP, EQI_COSTUME_HEAD_MID, EQI_COSTUME_HEAD_LOW, EQI_SHADOW_ARMOR, EQI_SHADOW_WEAPON, EQI_SHADOW_SHIELD, EQI_COSTUME_GARMENT, EQI_SHADOW_SHOES, EQI_SHADOW_ACC_L, EQI_SHADOW_ACC_R;
	
	for(.@i = 1; .@i<getarraysize(.@indices); ++.@i) {
		if(getequipisequiped(.@indices[.@i])) {
			.@menu$ = .@menu$ + F_getpositionname(.@indices[.@i]) + "-[" + getequipname(.@indices[.@i]) + "]";
			.@equipped = 1;
		}
		.@menu$ = .@menu$ + ":";
	}
	
	if (.@equipped == 0) {
		mes "เจ้าไม่ได้สวมใส่ อุปกรณ์สวมใส่ใด ๆ เลย ข้าไม่สามารถทำอะไรได้";
		close;
	}
	
	.@part = .@indices[select(.@menu$)];

	if(!getequipisequiped(.@part)) {
		mes "เจ้าเลือกช่องที่ ไม่ได้สวมใส่อะไรอยู่เลย";
		close;
	}
	
	.@selectedItemId = getequipid(.@part);

	// Remember all value
	.@refineCount = getequiprefinerycnt(.@part);
	.@cardSlot1 = getequipcardid(.@part,0);
	.@cardSlot2 = getequipcardid(.@part,1);
	.@cardSlot3 = getequipcardid(.@part,2);
	.@cardSlot4 = getequipcardid(.@part,3);
	.@randomOptionId1 = getequiprandomoption(.@part,0,ROA_ID);
	.@randomOptionId2 = getequiprandomoption(.@part,1,ROA_ID);
	.@randomOptionId3 = getequiprandomoption(.@part,2,ROA_ID);
	.@randomOptionId4 = getequiprandomoption(.@part,3,ROA_ID);
	.@randomOptionId5 = getequiprandomoption(.@part,4,ROA_ID);
	.@randomOptionValue1 = getequiprandomoption(.@part,0,ROA_VALUE);
	.@randomOptionValue2 = getequiprandomoption(.@part,1,ROA_VALUE);
	.@randomOptionValue3 = getequiprandomoption(.@part,2,ROA_VALUE);
	.@randomOptionValue4 = getequiprandomoption(.@part,3,ROA_VALUE);
	.@randomOptionValue5 = getequiprandomoption(.@part,4,ROA_VALUE);

	// Slot select
	.@itemSlotCount = getitemslots(.@selectedItemId);
	.@sumSlotCount = 4 - .@itemSlotCount;
	if(.@sumSlotCount <= 0){
		mes "อุปกรณ์สวมใส่ดังกล่าว ไม่สามารถ Enchant ได้";
		close;
	}
	mes "โปรดเลือก Slot ที่ต้องการ";
	next;

	.@menu$ = "";
	
	for(.@i = .@itemSlotCount; .@i < 4; ++.@i)
	.@menu$ += "ช่องที่ " + (.@i + 1) + ":";

	.@slot = select(.@menu$) + .@itemSlotCount - 1;
	
	if(Zeny < .price) {
		mes "เจ้ามี Zeny ไม่เพียงพอ";
		close;
	}
	Zeny = Zeny - .price;

	if (callfunc("F_IsEquipIDHack", .@part, .@selectedItemId)) {
		mes "เหมือนว่าเจ้าจะสลับอุปกรณ์ ระหว่างข้าดำเนินการอยู่นะ";
		close;
	}
	delequip .@part;
	if(.@slot == 0)
	.@cardSlot1 = $enchantIds[rand(0,$enchantIdArraySize - 1)];
	else if(.@slot == 1)
	.@cardSlot2 = $enchantIds[rand(0,$enchantIdArraySize - 1)];
	else if(.@slot == 2)
	.@cardSlot3 = $enchantIds[rand(0,$enchantIdArraySize - 1)];
	else if(.@slot == 3)
	.@cardSlot4 = $enchantIds[rand(0,$enchantIdArraySize - 1)];
	if(.@randomOptionId1 > 0){
		setarray .@OptID[0],.@randomOptionId1,.@randomOptionId2,.@randomOptionId3,.@randomOptionId4,.@randomOptionId5;
		setarray .@OptVal[0],.@randomOptionValue1,.@randomOptionValue2,.@randomOptionValue3,.@randomOptionValue4,.@randomOptionValue5;
		setarray .@OptParam[0],0,0,0,0,0;
		getitem3 .@selectedItemId,1,1,.@refineCount,0,.@cardSlot1,.@cardSlot2,.@cardSlot3,.@cardSlot4,.@OptID,.@OptVal,.@OptParam;
	}
	else
	getitem2 .@selectedItemId,1,1,.@refineCount,0,.@cardSlot1,.@cardSlot2,.@cardSlot3,.@cardSlot4;
	
	mes "เรียบร้อยแล้ว!";
	close;

OnInit:
	.price = 5000000;
	waitingroom "(Zeny)Random Enchantment",0;
	end;
}*/

prontera,124,252,3	script	Random Enchantment#2	868,{
	mes "^3F28FFโอกาสติด:^000000 100%";
	mes "^3F28FFEnchant ได้เฉพาะ:^000000 อุปกรณ์สวมใส่ที่มี Slot ไม่ครบ 4 Slot";
	mes "^3F28FFItem ที่ต้องใช้:^000000 " + getitemname(.itemId);
	next;
	
	setarray .@indices[1], EQI_HEAD_TOP, EQI_HEAD_MID, EQI_HEAD_LOW, EQI_ARMOR, EQI_HAND_L, EQI_HAND_R, EQI_GARMENT, EQI_SHOES, EQI_ACC_L, EQI_ACC_R, EQI_COSTUME_HEAD_TOP, EQI_COSTUME_HEAD_MID, EQI_COSTUME_HEAD_LOW, EQI_SHADOW_ARMOR, EQI_SHADOW_WEAPON, EQI_SHADOW_SHIELD, EQI_COSTUME_GARMENT, EQI_SHADOW_SHOES, EQI_SHADOW_ACC_L, EQI_SHADOW_ACC_R;
	
	for(.@i = 1; .@i<getarraysize(.@indices); ++.@i) {
		if(getequipisequiped(.@indices[.@i])) {
			.@menu$ = .@menu$ + F_getpositionname(.@indices[.@i]) + "-[" + getequipname(.@indices[.@i]) + "]";
			.@equipped = 1;
		}
		.@menu$ = .@menu$ + ":";
	}
	
	if (.@equipped == 0) {
		mes "เจ้าไม่ได้สวมใส่ อุปกรณ์สวมใส่ใด ๆ เลย ข้าไม่สามารถทำอะไรได้";
		close;
	}
	
	.@part = .@indices[select(.@menu$)];

	if(!getequipisequiped(.@part)) {
		mes "เจ้าเลือกช่องที่ ไม่ได้สวมใส่อะไรอยู่เลย";
		close;
	}
	
	.@selectedItemId = getequipid(.@part);

	// Remember all value
	.@refineCount = getequiprefinerycnt(.@part);
	.@cardSlot1 = getequipcardid(.@part,0);
	.@cardSlot2 = getequipcardid(.@part,1);
	.@cardSlot3 = getequipcardid(.@part,2);
	.@cardSlot4 = getequipcardid(.@part,3);
	.@randomOptionId1 = getequiprandomoption(.@part,0,ROA_ID);
	.@randomOptionId2 = getequiprandomoption(.@part,1,ROA_ID);
	.@randomOptionId3 = getequiprandomoption(.@part,2,ROA_ID);
	.@randomOptionId4 = getequiprandomoption(.@part,3,ROA_ID);
	.@randomOptionId5 = getequiprandomoption(.@part,4,ROA_ID);
	.@randomOptionValue1 = getequiprandomoption(.@part,0,ROA_VALUE);
	.@randomOptionValue2 = getequiprandomoption(.@part,1,ROA_VALUE);
	.@randomOptionValue3 = getequiprandomoption(.@part,2,ROA_VALUE);
	.@randomOptionValue4 = getequiprandomoption(.@part,3,ROA_VALUE);
	.@randomOptionValue5 = getequiprandomoption(.@part,4,ROA_VALUE);

	// Slot select
	.@itemSlotCount = getitemslots(.@selectedItemId);
	.@sumSlotCount = 4 - .@itemSlotCount;
	if(.@sumSlotCount <= 0){
		mes "อุปกรณ์สวมใส่ดังกล่าว ไม่สามารถ Enchant ได้";
		close;
	}
	mes "โปรดเลือก Slot ที่ต้องการ";
	next;

	.@menu$ = "";
	
	for(.@i = .@itemSlotCount; .@i < 4; ++.@i)
	.@menu$ += "ช่องที่ " + (.@i + 1) + ":";

	.@slot = select(.@menu$) + .@itemSlotCount - 1;
	
	if(countitem(.itemId) < 1) {
		mes getitemname(.itemId) + " ไม่เพียงพอ";
		close;
	}
	delitem .itemId,1;

	if (callfunc("F_IsEquipIDHack", .@part, .@selectedItemId)) {
		mes "เหมือนว่าเจ้าจะสลับอุปกรณ์ ระหว่างข้าดำเนินการอยู่นะ";
		close;
	}
	delequip .@part;
	if(.@slot == 0)
	.@cardSlot1 = $enchantIds[rand(0,getarraysize($enchantIds) - 1)];
	else if(.@slot == 1)
	.@cardSlot2 = $enchantIds[rand(0,getarraysize($enchantIds) - 1)];
	else if(.@slot == 2)
	.@cardSlot3 = $enchantIds[rand(0,getarraysize($enchantIds) - 1)];
	else if(.@slot == 3)
	.@cardSlot4 = $enchantIds[rand(0,getarraysize($enchantIds) - 1)];
	if(.@randomOptionId1 > 0){
		setarray .@OptID[0],.@randomOptionId1,.@randomOptionId2,.@randomOptionId3,.@randomOptionId4,.@randomOptionId5;
		setarray .@OptVal[0],.@randomOptionValue1,.@randomOptionValue2,.@randomOptionValue3,.@randomOptionValue4,.@randomOptionValue5;
		setarray .@OptParam[0],0,0,0,0,0;
		getitem3 .@selectedItemId,1,1,.@refineCount,0,.@cardSlot1,.@cardSlot2,.@cardSlot3,.@cardSlot4,.@OptID,.@OptVal,.@OptParam;
	}
	else
	getitem2 .@selectedItemId,1,1,.@refineCount,0,.@cardSlot1,.@cardSlot2,.@cardSlot3,.@cardSlot4;
	
	mes "เรียบร้อยแล้ว!";
	close;

OnInit:
	.itemId = 40015;
	waitingroom "Random Enchantment",0;
	end;
}

/*prontera,129,238,1	script	Target Enchantment	868,{
	if(!enchantment_item_id)
	goto L_SetItemId;
	mes "ต้องการ " + $enchant_target_amount + " " + getitemname(.itemId)+ " ในการแลก";
	mes "คุณอยากได้ Enchant: " + getitemname(enchantment_item_id);
	mes "๐ ^D10687จำนวนที่ใช้แลกจะเปลี่ยนทุก ๆ xx:30น.^000000)";
	next;
	menu "กำหนด Enchant",-,"ขั้นตอนต่อไป",L_Start;
	next;
	L_SetItemId:
	mes "โปรดใส่ Enchant ID ที่อยากได้";
	mes "<URL>Enchant ID ที่มีทั้งหมด<INFO>https://raw.githubusercontent.com/kaninhot004/rathena/the-box-2/npc/utilities/global_item_ids.txt</INFO></URL>";
	input .@itemId;
	freeloop(1);
	for(.@i = 0; .@i < $enchantIdArraySize; .@i++){
		if(.@itemId == $enchantIds[.@i]){
			enchantment_item_id = .@itemId;
			break;
		}
	}
	freeloop(0);
	if(enchantment_item_id <= 0)
	mes "ไม่พบ Enchant ID ดังกล่าว";
	else
	mes "คุณอยากได้ Enchant: " + getitemname(enchantment_item_id);
	close;
	
	L_Start:
	if(enchantment_item_id <= 0){
		mes "คุณยังไม่ได้กำหนด Enchant ที่อยากได้";
		close;
	}
	mes "^3F28FFโอกาสติด:^000000 100%";
	mes "^3F28FFEnchant ได้เฉพาะ:^000000 อุปกรณ์สวมใส่ที่มี Slot ไม่ครบ 4 Slot";
	mes "^3F28FFItem ที่ต้องใช้:^000000 " + getitemname(.itemId);
	next;
	
	setarray .@indices[1], EQI_HEAD_TOP, EQI_HEAD_MID, EQI_HEAD_LOW, EQI_ARMOR, EQI_HAND_L, EQI_HAND_R, EQI_GARMENT, EQI_SHOES, EQI_ACC_L, EQI_ACC_R, EQI_COSTUME_HEAD_TOP, EQI_COSTUME_HEAD_MID, EQI_COSTUME_HEAD_LOW, EQI_SHADOW_ARMOR, EQI_SHADOW_WEAPON, EQI_SHADOW_SHIELD, EQI_COSTUME_GARMENT, EQI_SHADOW_SHOES, EQI_SHADOW_ACC_L, EQI_SHADOW_ACC_R;
	
	for(.@i = 1; .@i<getarraysize(.@indices); ++.@i) {
		if(getequipisequiped(.@indices[.@i])) {
			.@menu$ = .@menu$ + F_getpositionname(.@indices[.@i]) + "-[" + getequipname(.@indices[.@i]) + "]";
			.@equipped = 1;
		}
		.@menu$ = .@menu$ + ":";
	}
	
	if (.@equipped == 0) {
		mes "เจ้าไม่ได้สวมใส่ อุปกรณ์สวมใส่ใด ๆ เลย ข้าไม่สามารถทำอะไรได้";
		close;
	}
	
	.@part = .@indices[select(.@menu$)];

	if(!getequipisequiped(.@part)) {
		mes "เจ้าเลือกช่องที่ ไม่ได้สวมใส่อะไรอยู่เลย";
		close;
	}
	
	.@selectedItemId = getequipid(.@part);

	// Remember all value
	.@refineCount = getequiprefinerycnt(.@part);
	.@cardSlot1 = getequipcardid(.@part,0);
	.@cardSlot2 = getequipcardid(.@part,1);
	.@cardSlot3 = getequipcardid(.@part,2);
	.@cardSlot4 = getequipcardid(.@part,3);
	.@randomOptionId1 = getequiprandomoption(.@part,0,ROA_ID);
	.@randomOptionId2 = getequiprandomoption(.@part,1,ROA_ID);
	.@randomOptionId3 = getequiprandomoption(.@part,2,ROA_ID);
	.@randomOptionId4 = getequiprandomoption(.@part,3,ROA_ID);
	.@randomOptionId5 = getequiprandomoption(.@part,4,ROA_ID);
	.@randomOptionValue1 = getequiprandomoption(.@part,0,ROA_VALUE);
	.@randomOptionValue2 = getequiprandomoption(.@part,1,ROA_VALUE);
	.@randomOptionValue3 = getequiprandomoption(.@part,2,ROA_VALUE);
	.@randomOptionValue4 = getequiprandomoption(.@part,3,ROA_VALUE);
	.@randomOptionValue5 = getequiprandomoption(.@part,4,ROA_VALUE);

	// Slot select
	.@itemSlotCount = getitemslots(.@selectedItemId);
	.@sumSlotCount = 4 - .@itemSlotCount;
	if(.@sumSlotCount <= 0){
		mes "อุปกรณ์สวมใส่ดังกล่าว ไม่สามารถ Enchant ได้";
		close;
	}
	mes "โปรดเลือก Slot ที่ต้องการ";
	next;

	.@menu$ = "";
	
	for(.@i = .@itemSlotCount; .@i < 4; ++.@i)
	.@menu$ += "ช่องที่ " + (.@i + 1) + ":";

	.@slot = select(.@menu$) + .@itemSlotCount - 1;
	
	if(countitem(.itemId) < $enchant_target_amount) {
		mes "คุณไม่มี " + $enchant_target_amount + " " + getitemname(.itemId);
		close;
	}
	
	delitem .itemId,$enchant_target_amount;

	if (callfunc("F_IsEquipIDHack", .@part, .@selectedItemId)) {
		mes "เหมือนว่าเจ้าจะสลับอุปกรณ์ ระหว่างข้าดำเนินการอยู่นะ";
		close;
	}
	delequip .@part;
	if(.@slot == 0)
	.@cardSlot1 = enchantment_item_id;
	else if(.@slot == 1)
	.@cardSlot2 = enchantment_item_id;
	else if(.@slot == 2)
	.@cardSlot3 = enchantment_item_id;
	else if(.@slot == 3)
	.@cardSlot4 = enchantment_item_id;
	if(.@randomOptionId1 > 0){
		setarray .@OptID[0],.@randomOptionId1,.@randomOptionId2,.@randomOptionId3,.@randomOptionId4,.@randomOptionId5;
		setarray .@OptVal[0],.@randomOptionValue1,.@randomOptionValue2,.@randomOptionValue3,.@randomOptionValue4,.@randomOptionValue5;
		setarray .@OptParam[0],0,0,0,0,0;
		getitem3 .@selectedItemId,1,1,.@refineCount,0,.@cardSlot1,.@cardSlot2,.@cardSlot3,.@cardSlot4,.@OptID,.@OptVal,.@OptParam;
	}
	else
	getitem2 .@selectedItemId,1,1,.@refineCount,0,.@cardSlot1,.@cardSlot2,.@cardSlot3,.@cardSlot4;
	
	mes "เรียบร้อยแล้ว!";
	close;

	L_RefreshRate:
	if($enchantIdArraySize)
	$enchant_target_amount = rand($enchantIdArraySize,($enchantIdArraySize * 4));
	else
	$enchant_target_amount = 4000;
	if($enchant_target_amount > 30000)
	$enchant_target_amount = 30000;
	return;
	
OnMinute30:
	callsub L_RefreshRate;
	end;
	
OnInit:
	callsub L_RefreshRate;
	.itemId = 40015;
	waitingroom "(กำหนด)(Key)Enchantment",0;
	end;
}*/
